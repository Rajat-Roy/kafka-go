sudo snap install microk8s --classic
sudo usermod -a -G microk8s rajat
sudo chown -f -R rajat ~/.kube
microk8s enable dashboard dns registry istio
microk8s kubectl get all --all-namespaces
microk8s dashboard-proxy

microk8s kubectl create namespace kafka
microk8s kubectl get namespace
microk8s kubectl create -f 'https://strimzi.io/install/latest?namespace=kafka' -n kafka
microk8s kubectl get pods -w -n kafka
microk8s kubectl apply -f https://strimzi.io/examples/latest/kafka/kafka-persistent-single.yaml -n kafka
microk8s kubectl get kafka my-cluster -n kafka -oyaml
microk8s kubectl get pods -n kafka
microk8s kubectl get services -n kafka

microk8s kubectl exec -it my-cluster-kafka-0 -n kafka -- /bin/bash

./bin/kafka-console-producer.sh --bootstrap-server my-cluster-kafka-bootstrap:9092 --topic mytopic

./bin/kafka-console-consumer.sh --bootstrap-server my-cluster-kafka-bootstrap:9092 --topic mytopic --from-beginning

exit

microk8s kubectl get kafkatopic -n kafka

microk8s kubectl expose deployment my-cluster-entity-operator -n kafka --name lb-service-plain --type LoadBalancer --port 9092 --target-port 9092
microk8s kubectl expose deployment my-cluster-entity-operator -n kafka --name lb-service-ssl --type LoadBalancer --port 9093 --target-port 9093

microk8s kubectl delete svc lb-service-plain -n kafka

./bin/kafka-console-consumer.sh --bootstrap-server 192.168.102:9092 --topic mytopic --from-beginning
